<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Page Title</title>

	<style>
		#my-canvas {
			border:1px solid black;
		}
	</style>

</head>
<body>

<canvas id="my-canvas" width="600" height="400">
	Canvas is not supported by your browser
</canvas>

<script>
// ANIMATION
// 1. clear
// 2. draw
// 3. move

window.onload = init3;

var canvas, ctx;
var rectangleX = 0;
var colors = ["red", "blue", "green"];
var currentColor = 0;
var speed = 3;
// MODE 01 =========================================
function init() {
 // This function is called after the page is loaded
 // 1 - Get the canvas
 canvas = document.getElementById('my-canvas');
 // 2 - Get the context
 ctx=canvas.getContext('2d');
 // 3 - we can animate
 setInterval(animate, 60);
}
function animate() {
	// 1. clear the canvas
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	// draw a red rectangle
	ctx.fillStyle='#FF0000';
	ctx.fillRect(rectangleX,0,80,100);

	// 3. move
	rectangleX += 1;
}
// MODE 02 =========================================
function init2() {
 // This function is called after the page is loaded
 // 1 - Get the canvas
 canvas = document.getElementById('my-canvas');
 // 2 - Get the context
 ctx=canvas.getContext('2d');
 // 3 - we can animate
 setTimeout(animate2, 16);
}
function animate2() {
	// 1. clear the canvas
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	// draw a red rectangle
	ctx.fillStyle='#FF0000';
	ctx.fillRect(rectangleX,0,80,100);

	// 3. move
	rectangleX += 1;

	requestAnimationFrame(animate3);
}

// MODE 03 =========================================
function init3() {
 // This function is called after the page is loaded
 // 1 - Get the canvas
 canvas = document.getElementById('my-canvas');
 // 2 - Get the context
 ctx=canvas.getContext('2d');
 // 3 - we can animate
 setTimeout(animate3, 60);
 setInterval(changeColor, 100);
}
function animate3() {
	// 1. clear the canvas
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	// draw
	ctx.fillRect(rectangleX,0,80,100);

	// 3. move
	if ((rectangleX + 80) > 200 || rectangleX < 0) {
		speed = -speed;
	}
	rectangleX = rectangleX + speed;

	requestAnimationFrame(animate3);
}
function changeColor () {
	ctx.fillStyle = colors[currentColor%3];
	currentColor += 1;
}



</script>
</body>
</html>
